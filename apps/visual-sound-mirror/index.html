<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Sound Mirror</title>
    <link rel="stylesheet" href="styles.css">
    <!-- MediaPipe for hand tracking -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
</head>
<body>
    <div id="container">
        <canvas id="canvas"></canvas>
        <video id="video" autoplay playsinline muted></video>

        <div id="overlay" class="active">
            <div id="welcome">
                <h1>Visual Sound Mirror</h1>
                <p>An interactive art piece that transforms your movements into mesmerizing visuals and soothing sounds</p>
                <button id="startButton">Begin Experience</button>
                <p class="hint">Camera and audio permissions required</p>
            </div>
        </div>

        <div id="controls">
            <div class="mode-switcher">
                <button class="mode-btn" data-mode="ribbons" title="Ribbons Mode (Press 1)">ğŸ¨</button>
                <button class="mode-btn" data-mode="theremin" title="Theremin Mode (Press 2)">ğŸµ</button>
                <button class="mode-btn" data-mode="pads" title="Sample Pads Mode (Press 3)">ğŸ¥</button>
                <button class="mode-btn" data-mode="knobs" title="Knobs Mode (Press 4)">ğŸ›ï¸</button>
            </div>
            <div class="control-buttons">
                <button id="muteButton" title="Toggle Audio">ğŸ”Š</button>
                <button id="debugButton" title="Toggle Debug">ğŸ”</button>
                <button id="infoButton" title="Info">â„¹ï¸</button>
            </div>
        </div>

        <div id="debug" class="hidden">
            <div class="debug-panel">
                <h3>Debug Info</h3>
                <p>Motion Intensity: <span id="debugMotion">0</span></p>
                <p>Position: <span id="debugPosition">0, 0</span></p>
                <p>Particles: <span id="debugParticles">0</span></p>
                <p>Audio: <span id="debugAudio">Initializing...</span></p>
                <p>Hands Detected: <span id="debugHands">0</span></p>
            </div>
        </div>

        <div id="info" class="hidden">
            <div class="info-content">
                <h2>Visual Sound Mirror - v6.0</h2>
                <h3>Music Synthesis Edition</h3>

                <h4>Modes (Press 1-4 to switch)</h4>
                <ul>
                    <li><strong>ğŸ¨ Ribbons (1):</strong> Flowing silk ribbons from your fingertips. Left hand controls filter, right hand controls delay/echo.</li>
                    <li><strong>ğŸµ Theremin (2):</strong> Play melodies with hand position. X-axis = pitch (quantized to scale), Y-axis = filter brightness. Press S to cycle scales.</li>
                    <li><strong>ğŸ¥ Sample Pads (3):</strong> Tap the 4x4 grid with your fingertips to trigger drum samples, synths, and percussion.</li>
                    <li><strong>ğŸ›ï¸ Knobs (4):</strong> Control audio parameters by rotating virtual knobs with your index finger.</li>
                </ul>

                <h4>Controls</h4>
                <ul>
                    <li><strong>1-4 keys:</strong> Switch between modes</li>
                    <li><strong>S key:</strong> Cycle musical scales (Theremin mode)</li>
                    <li><strong>ğŸ”Š button:</strong> Toggle audio on/off</li>
                    <li><strong>ğŸ” button:</strong> Toggle debug mode (shows hand tracking)</li>
                </ul>

                <h4>Gestures</h4>
                <ul>
                    <li>Pinch/spread fingers to modulate sound</li>
                    <li>Touch fingertips together for harmonic chords</li>
                    <li>Two hands close = special pulsing effect</li>
                </ul>

                <p class="privacy">ğŸ”’ All processing happens locally - no data is recorded or transmitted</p>
                <button id="closeInfo">Close</button>
            </div>
        </div>

        <div id="status"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>
